import { Knex } from 'knex';

export async function seed(knex: Knex): Promise<void> {
  // Verwijder bestaande data
  await knex('toeslagtabellen').del();

  // Toeslagtabel 2024 data (officiÃ«le gegevens Belastingdienst)
  const toeslagtabel2024 = {
    year: 2024,
    max_hourly_rates: {
      dagopvang: 10.25,
      bso: 9.12,
      gastouder: 7.53
    },
    income_brackets: [
      { min: 0, max: 22346, perc_first_child: 96.0, perc_other_children: 96.0 },
      { min: 22347, max: 23834, perc_first_child: 96.0, perc_other_children: 96.0 },
      { min: 23835, max: 25324, perc_first_child: 95.6, perc_other_children: 96.0 },
      { min: 25325, max: 26813, perc_first_child: 95.1, perc_other_children: 96.0 },
      { min: 26814, max: 28302, perc_first_child: 94.7, perc_other_children: 96.0 },
      { min: 28303, max: 29791, perc_first_child: 94.2, perc_other_children: 96.0 },
      { min: 29792, max: 31280, perc_first_child: 93.8, perc_other_children: 96.0 },
      { min: 31281, max: 32768, perc_first_child: 93.3, perc_other_children: 96.0 },
      { min: 32769, max: 34257, perc_first_child: 92.9, perc_other_children: 96.0 },
      { min: 34258, max: 35746, perc_first_child: 92.4, perc_other_children: 96.0 },
      { min: 35747, max: 37235, perc_first_child: 92.0, perc_other_children: 96.0 },
      { min: 37236, max: 38724, perc_first_child: 91.5, perc_other_children: 96.0 },
      { min: 38725, max: 40213, perc_first_child: 91.1, perc_other_children: 96.0 },
      { min: 40214, max: 41701, perc_first_child: 90.6, perc_other_children: 96.0 },
      { min: 41702, max: 43190, perc_first_child: 90.2, perc_other_children: 96.0 },
      { min: 43191, max: 44679, perc_first_child: 89.7, perc_other_children: 96.0 },
      { min: 44680, max: 46168, perc_first_child: 89.3, perc_other_children: 96.0 },
      { min: 46169, max: 47657, perc_first_child: 88.8, perc_other_children: 96.0 },
      { min: 47658, max: 49146, perc_first_child: 88.4, perc_other_children: 96.0 },
      { min: 49147, max: 50634, perc_first_child: 87.9, perc_other_children: 96.0 },
      { min: 50635, max: 52123, perc_first_child: 87.5, perc_other_children: 96.0 },
      { min: 52124, max: 53612, perc_first_child: 87.0, perc_other_children: 96.0 },
      { min: 53613, max: 55101, perc_first_child: 86.6, perc_other_children: 96.0 },
      { min: 55102, max: 56590, perc_first_child: 86.1, perc_other_children: 96.0 },
      { min: 56591, max: 58079, perc_first_child: 85.7, perc_other_children: 96.0 },
      { min: 58080, max: 59567, perc_first_child: 85.2, perc_other_children: 96.0 },
      { min: 59568, max: 61056, perc_first_child: 84.8, perc_other_children: 96.0 },
      { min: 61057, max: 62545, perc_first_child: 84.3, perc_other_children: 96.0 },
      { min: 62546, max: 64034, perc_first_child: 83.9, perc_other_children: 96.0 },
      { min: 64035, max: 65523, perc_first_child: 83.4, perc_other_children: 96.0 },
      { min: 65524, max: 67012, perc_first_child: 83.0, perc_other_children: 96.0 },
      { min: 67013, max: 68500, perc_first_child: 82.5, perc_other_children: 96.0 },
      { min: 68501, max: 69989, perc_first_child: 82.1, perc_other_children: 96.0 },
      { min: 69990, max: 71478, perc_first_child: 81.6, perc_other_children: 96.0 },
      { min: 71479, max: 72967, perc_first_child: 81.2, perc_other_children: 96.0 },
      { min: 72968, max: 74456, perc_first_child: 80.7, perc_other_children: 95.6 },
      { min: 74457, max: 75945, perc_first_child: 80.3, perc_other_children: 95.1 },
      { min: 75946, max: 77433, perc_first_child: 79.8, perc_other_children: 94.7 },
      { min: 77434, max: 78922, perc_first_child: 79.4, perc_other_children: 94.2 },
      { min: 78923, max: 80411, perc_first_child: 78.9, perc_other_children: 93.8 },
      { min: 80412, max: 81900, perc_first_child: 78.5, perc_other_children: 93.3 },
      { min: 81901, max: 83389, perc_first_child: 78.0, perc_other_children: 92.9 },
      { min: 83390, max: 84878, perc_first_child: 77.6, perc_other_children: 92.4 },
      { min: 84879, max: 86366, perc_first_child: 77.1, perc_other_children: 92.0 },
      { min: 86367, max: 87855, perc_first_child: 76.7, perc_other_children: 91.5 },
      { min: 87856, max: 89344, perc_first_child: 76.2, perc_other_children: 91.1 },
      { min: 89345, max: 90833, perc_first_child: 75.8, perc_other_children: 90.6 },
      { min: 90834, max: 92322, perc_first_child: 75.3, perc_other_children: 90.2 },
      { min: 92323, max: 93811, perc_first_child: 74.9, perc_other_children: 89.7 },
      { min: 93812, max: 95299, perc_first_child: 74.4, perc_other_children: 89.3 },
      { min: 95300, max: 96788, perc_first_child: 74.0, perc_other_children: 88.8 },
      { min: 96789, max: 98277, perc_first_child: 73.5, perc_other_children: 88.4 },
      { min: 98278, max: 99766, perc_first_child: 73.1, perc_other_children: 87.9 },
      { min: 99767, max: 101255, perc_first_child: 72.6, perc_other_children: 87.5 },
      { min: 101256, max: 102744, perc_first_child: 72.2, perc_other_children: 87.0 },
      { min: 102745, max: 104232, perc_first_child: 71.7, perc_other_children: 86.6 },
      { min: 104233, max: 105721, perc_first_child: 71.3, perc_other_children: 86.1 },
      { min: 105722, max: 107210, perc_first_child: 70.8, perc_other_children: 85.7 },
      { min: 107211, max: 108699, perc_first_child: 70.4, perc_other_children: 85.2 },
      { min: 108700, max: 110188, perc_first_child: 69.9, perc_other_children: 84.8 },
      { min: 110189, max: 111677, perc_first_child: 69.5, perc_other_children: 84.3 },
      { min: 111678, max: 113165, perc_first_child: 69.0, perc_other_children: 83.9 },
      { min: 113166, max: 114654, perc_first_child: 68.6, perc_other_children: 83.4 },
      { min: 114655, max: 116143, perc_first_child: 68.1, perc_other_children: 83.0 },
      { min: 116144, max: 117632, perc_first_child: 67.7, perc_other_children: 82.5 },
      { min: 117633, max: 119121, perc_first_child: 67.2, perc_other_children: 82.1 },
      { min: 119122, max: 120610, perc_first_child: 66.8, perc_other_children: 81.6 },
      { min: 120611, max: 122098, perc_first_child: 66.3, perc_other_children: 81.2 },
      { min: 122099, max: 123587, perc_first_child: 65.9, perc_other_children: 80.7 },
      { min: 123588, max: 125076, perc_first_child: 65.4, perc_other_children: 80.3 },
      { min: 125077, max: 126565, perc_first_child: 65.0, perc_other_children: 79.8 },
      { min: 126566, max: 128054, perc_first_child: 64.5, perc_other_children: 79.4 },
      { min: 128055, max: 129543, perc_first_child: 64.1, perc_other_children: 78.9 },
      { min: 129544, max: 131031, perc_first_child: 63.6, perc_other_children: 78.5 },
      { min: 131032, max: 132520, perc_first_child: 63.2, perc_other_children: 78.0 },
      { min: 132521, max: 134009, perc_first_child: 62.7, perc_other_children: 77.6 },
      { min: 134010, max: 135498, perc_first_child: 62.3, perc_other_children: 77.1 },
      { min: 135499, max: 136987, perc_first_child: 61.8, perc_other_children: 76.7 },
      { min: 136988, max: 138476, perc_first_child: 61.4, perc_other_children: 76.2 },
      { min: 138477, max: 139964, perc_first_child: 60.9, perc_other_children: 75.8 },
      { min: 139965, max: 141453, perc_first_child: 60.5, perc_other_children: 75.3 },
      { min: 141454, max: 142942, perc_first_child: 60.0, perc_other_children: 74.9 },
      { min: 142943, max: 144431, perc_first_child: 59.6, perc_other_children: 74.4 },
      { min: 144432, max: 145920, perc_first_child: 59.1, perc_other_children: 74.0 },
      { min: 145921, max: 147409, perc_first_child: 58.7, perc_other_children: 73.5 },
      { min: 147410, max: 148897, perc_first_child: 58.2, perc_other_children: 73.1 },
      { min: 148898, max: 150386, perc_first_child: 57.8, perc_other_children: 72.6 },
      { min: 150387, max: 151875, perc_first_child: 57.3, perc_other_children: 72.2 },
      { min: 151876, max: 153364, perc_first_child: 56.9, perc_other_children: 71.7 },
      { min: 153365, max: 154853, perc_first_child: 56.4, perc_other_children: 71.3 },
      { min: 154854, max: 156342, perc_first_child: 56.0, perc_other_children: 70.8 },
      { min: 156343, max: 157830, perc_first_child: 55.5, perc_other_children: 70.4 },
      { min: 157831, max: 159319, perc_first_child: 55.1, perc_other_children: 69.9 },
      { min: 159320, max: 160808, perc_first_child: 54.6, perc_other_children: 69.5 },
      { min: 160809, max: 162297, perc_first_child: 54.2, perc_other_children: 69.0 },
      { min: 162298, max: 163786, perc_first_child: 53.7, perc_other_children: 68.6 },
      { min: 163787, max: 165275, perc_first_child: 53.3, perc_other_children: 68.1 },
      { min: 165276, max: 166763, perc_first_child: 52.8, perc_other_children: 67.7 },
      { min: 166764, max: 168252, perc_first_child: 52.4, perc_other_children: 67.2 },
      { min: 168253, max: 169741, perc_first_child: 51.9, perc_other_children: 66.8 },
      { min: 169742, max: 171230, perc_first_child: 51.5, perc_other_children: 66.3 },
      { min: 171231, max: 172719, perc_first_child: 51.0, perc_other_children: 65.9 },
      { min: 172720, max: 174208, perc_first_child: 50.6, perc_other_children: 65.4 },
      { min: 174209, max: 175696, perc_first_child: 50.1, perc_other_children: 65.0 },
      { min: 175697, max: 177185, perc_first_child: 49.7, perc_other_children: 64.5 },
      { min: 177186, max: 178674, perc_first_child: 49.2, perc_other_children: 64.1 },
      { min: 178675, max: 180163, perc_first_child: 48.8, perc_other_children: 63.6 },
      { min: 180164, max: 181652, perc_first_child: 48.3, perc_other_children: 63.2 },
      { min: 181653, max: 183141, perc_first_child: 47.9, perc_other_children: 62.7 },
      { min: 183142, max: 184629, perc_first_child: 47.4, perc_other_children: 62.3 },
      { min: 184630, max: 186118, perc_first_child: 47.0, perc_other_children: 61.8 },
      { min: 186119, max: 187607, perc_first_child: 46.5, perc_other_children: 61.4 },
      { min: 187608, max: 189096, perc_first_child: 46.1, perc_other_children: 60.9 },
      { min: 189097, max: 190585, perc_first_child: 45.6, perc_other_children: 60.5 },
      { min: 190586, max: 192074, perc_first_child: 45.2, perc_other_children: 60.0 },
      { min: 192075, max: 193562, perc_first_child: 44.7, perc_other_children: 59.6 },
      { min: 193563, max: 195051, perc_first_child: 44.3, perc_other_children: 59.1 },
      { min: 195052, max: 196540, perc_first_child: 43.8, perc_other_children: 58.7 },
      { min: 196541, max: 198029, perc_first_child: 43.4, perc_other_children: 58.2 },
      { min: 198030, max: 199518, perc_first_child: 42.9, perc_other_children: 57.8 },
      { min: 199519, max: 201007, perc_first_child: 42.5, perc_other_children: 57.3 },
      { min: 201008, max: 202495, perc_first_child: 42.0, perc_other_children: 56.9 },
      { min: 202496, max: 203984, perc_first_child: 41.6, perc_other_children: 56.4 },
      { min: 203985, max: 205473, perc_first_child: 41.1, perc_other_children: 56.0 },
      { min: 205474, max: 206962, perc_first_child: 40.7, perc_other_children: 55.5 },
      { min: 206963, max: 207679, perc_first_child: 40.2, perc_other_children: 55.1 },
      { min: 207680, max: null, perc_first_child: 33.3, perc_other_children: 67.1 }
    ]
  };

  // Insert toeslagtabel 2024
  await knex('toeslagtabellen').insert({
    jaar: 2024,
    data: JSON.stringify(toeslagtabel2024),
    actief: true,
    created_at: new Date(),
    updated_at: new Date()
  });

  // Update bestaande organisaties met default toeslagjaar 2024
  await knex('organisaties').update({
    actief_toeslagjaar: 2024,
    gemeente_toeslag_percentage: 0.00,
    gemeente_toeslag_actief: false
  });

  console.log('â Toeslagtabel 2024 seeded en organisaties bijgewerkt');
} 